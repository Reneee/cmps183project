{{extend 'layout.html'}}

<h1>
    {{=category.name.title()}}
</h1>

{{if request.function=='list_posts_by_votes':}}
{{=A('sort by datetime', _class='btn', _href=URL('list_posts_by_datetime', args=category.name))}}
{{else:}}
{{=A('sort by votes', _class='btn', _href=URL('list_posts_by_votes', args=category.name))}}
{{pass}}

{{=A('post a new link':, _class='btn btn-primary', _href=URL('create_post', args=category.name))}}

<hr/>

{{for post in rows:}}
<div class="well">
    <table>
        <tr><td><span class="votes">{{=post.votes}}</span></td>
            <td><strong>{{=A(post.title, _href=post.url) if post.url else post.title}}</strong></td>
        </tr>
        <tr><td></td><td>{{=A('comments', _href=URL('view_post', args=post.id))}}</td></tr>
    </table>
</div>
{{pass}}

{{if page>0:}}
{{=A('previous', _class='btn', _href=URL(args=(category.name, page-1)))}}
{{pass}}

{{if len(rows)>=POSTS_PER_PAGE:}}
{{=A('next', _class='btn', _href=URL(args=(category.name, page+1)))}}
{{pass}}
